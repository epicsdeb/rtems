#
# process the options
#
# defaults for getopt vars
#

verbose=""
limit="0"
use_sysv_ipc="auto"

## TODO: may want command line ability to turn on some psim tracing
while getopts vsl: OPT
do
    case "$OPT" in
	v) verbose="yes";;
        l) limit="$OPTARG";;
        s) use_sysv_ipc="yes";;
        *) fatal;;
    esac
done
shiftcount=`expr $OPTIND - 1`
shift $shiftcount

args=$*

if [ $# -eq 0 ] ; then
  fatal
fi

if [ X${RUN} = X ] ; then
  RUN=${rtemsTarget}-run
fi

gen_device_tree ${1} >${TREE_FILE}
runone ${1} ${limit}
rm -f ${TREE_FILE}
exit $?

